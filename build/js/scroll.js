!function(a,b){var c=function(){var a,b=document.createElement("fakeelement"),c={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};for(a in c)if(void 0!==b.style[a])return c[a]}(),d=function(a){this.$container=b(a.container),this.attr=a.attr||"animate",this.lazyClass=a.delay||"lazyload",this.preLoadNum=a.preLoadNum||3,this._initial()};d.prototype._initial=function(){this.index=0,this.pageArray=this.$container.find(".pt-page"),this.pageLength=this.pageArray.length,this.isAnimating=!1,this.animationArray=[],this.childrenNodes=[],this.lazyArray=[];var a=this,c=this.attr;b.each(this.pageArray,function(d,e){var f=b(e);a.animationArray.push(f.data(c)),a.childrenNodes.push(f.children(".removeable")),a.lazyArray.push(0),f.css("z-index",d)}),this.pageArray.eq(this.index).addClass("pt-page-current"),this._showPage(this.index)},d.prototype.nextPage=function(){if(!this.isAnimating&&this.index!=this.pageLength-1){var a=this.index,b=++this.index,d=(this.animationArray[a],this.pageArray.eq(a)),e=this.animationArray[b]+" animated",f=this.pageArray.eq(b),g=this;this.isAnimating=!0,f.addClass(e+" pt-page-current").one(c,function(){d.removeClass("pt-page-current"),f.removeClass(e),g._showPage(b,a),g.isAnimating=!1})}},d.prototype.prePage=function(){if(!this.isAnimating&&0!=this.index){var a=this.index,b=--this.index,d=this.animationArray[a]+" out animated",e=this.pageArray.eq(a),f=(this.animationArray[b],this.pageArray.eq(b)),g=this;this.isAnimating=!0,f.addClass("pt-page-current"),e.addClass(d).one(c,function(){e.removeClass(d+" pt-page-current"),g._showPage(b,a),g.isAnimating=!1})}},d.prototype._showPage=function(a,b){var c=this.childrenNodes[a].data("animate")+" animated";if(this.childrenNodes[a].removeClass("removeable").addClass(c),void 0!=b){var d=this.childrenNodes[b].data("animate")+" animated";this.childrenNodes[b].addClass("removeable").removeClass(d)}this._lazyLoad(a)},d.prototype._lazyLoad=function(a){for(var c=a,d=a+this.preLoadNum;d>c;c++)if(0===this.lazyArray[c]){var e=this.pageArray.eq(c),f=e.find("."+this.lazyClass);e.hasClass(this.lazyClass)?f.push(e):"",b.each(f,function(a,c){var d=b(c),e=d.attr("data-src"),f=d.attr("data-bg");f?d.css("background-image","url("+f+")"):"",e?d.attr("src",e):""}),this.lazyArray[c]=1}},"undefined"!=typeof module&&module.exports?module.exports=d:a.SlidePage=d}(window,Zepto);